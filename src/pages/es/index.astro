---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Hero from '../../components/Hero.astro';
import ProcessFlow from '../../components/ProcessFlow';
import ContainerSolution from '../../components/ContainerSolution.astro';
import ImpactSection from '../../components/ImpactSection.astro';
import TeamSection from '../../components/TeamSection.astro';
import ContactSection from '../../components/ContactSection.astro';
import NewsCard from '../../components/NewsCard.astro';
import { getCollection } from 'astro:content';
import es from '../../i18n/es.json';
const lang = 'es';
const t = es;
const latest = (await getCollection('news', ({ data }) => !data.draft))
  .sort((a,b) => +new Date(b.data.date) - +new Date(a.data.date))
  .slice(0,3);
---
<BaseLayout lang={lang} t={t} title="Combustible solar de residuos plÃ¡sticos">
  <Hero
    title="Combustible solar a partir de residuos plÃ¡sticos, donde nadie los recoge."
    subtitle="Nuestro sistema de pirÃ³lisis solar a pequeÃ±a escala convierte plÃ¡sticos no reciclables en combustible local â€“ una soluciÃ³n autÃ³noma para regiones remotas sin gestiÃ³n de residuos ni suministro energÃ©tico fiable."
    ctaPrimary={{ href: '#contact', label: 'Hazte socio' }}
    ctaSecondary={{ href: '#loesung', label: 'AsÃ­ funciona' }}
    badges={[
      { icon: 'ðŸ”‹', label: t.hero.badges[0] },
      { icon: 'ðŸŒ', label: t.hero.badges[1] },
      { icon: 'âš“', label: t.hero.badges[2] },
    ]}
  />
  <ProcessFlow lang="es" client:load />
  <ContainerSolution t={t.container} />
  <ImpactSection lang="es" />
  <TeamSection t={t.team} lang={lang} />
  {latest.length > 0 && (
    <section class="mx-auto max-w-6xl px-6 py-16">
      <h2 class="mb-8 text-3xl font-extrabold text-basola-brown">Ãšltimas noticias</h2>
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 items-stretch">
        {latest.map(({ slug, data }) => (
          <NewsCard
            url={`/news/${slug}`}
            title={data.title}
            date={data.date}
            summary={data.summary}
            tags={data.tags}
            heroImage={data.heroImage}
            moreLabel="MÃ¡s"
            lang={lang}
          />
        ))}
      </div>
    </section>
  )}
  <ContactSection t={t.contact} partners={t.partners} />
</BaseLayout>
