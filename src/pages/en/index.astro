---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Hero from '../../components/Hero.astro';
import StorySection from '../../components/StorySection.astro';
import SolutionSection from '../../components/SolutionSection.astro';
import BusinessSection from '../../components/BusinessSection.astro';
import ProblemSection from '../../components/ProblemSection.astro';
import ImpactSection from '../../components/ImpactSection.astro';
import TeamSection from '../../components/TeamSection.astro';
import PartnersSection from '../../components/PartnersSection.astro';
import ContactSection from '../../components/ContactSection.astro';
import NewsCard from '../../components/NewsCard.astro';
import { getCollection } from 'astro:content';
import en from '../../i18n/en.json';
const lang = 'en';
const t = en;
const latest = (await getCollection('news', ({ data }) => data.lang === lang && !data.draft))
  .sort((a,b) => +new Date(b.data.date) - +new Date(a.data.date))
  .slice(0,3);
const problemProps = {
  heading: 'The problem ‚Äî when no one comes to collect',
  subline:
    'In places like Ladrilleros (boat-only access), there is no waste collection: plastic is openly burned or dumped ‚Äî harming air, ocean and health.',
  kpis: [
    { id: 'k1', value: 100, suffix: ' kg/day', label: 'Local plastic waste' },
    { id: 'k2', value: 86, suffix: ' kg CO‚ÇÇ/day', label: 'Avoidable CO‚ÇÇ (open burning)' },
    { id: 'k3', value: 40, suffix: ' L/day', label: 'Diesel replaced (local use)' },
  ],
  progress: {
    targetPct: 85,
    title: 'Uncollected waste in coastal communities',
    note: '‚Üí often leads to open burning or dumping.',
  },
  flow: [
    { icon: 'üóëÔ∏è', title: 'No collection', text: 'No access to municipal services; plastic piles up.' },
    { icon: 'üî•', title: 'Open burning', text: 'Quick fix ‚Äî releases fine particles, black carbon & CO‚ÇÇ.' },
    { icon: '‚òÅÔ∏è', title: 'Health & climate', text: 'Air pollution & climate impact ‚Äî often ‚Äúinvisible‚Äù at sea.' },
  ],
  contextImage: { src: '/assets/Ladrilleros.png', alt: 'Ladrilleros coastal village' },
  contextChips: ['üìç ‚âà 60 min by boat from Buenaventura'],
  contextBullets: ['~100 kg plastic per day', '~35% higher diesel price than in the city', 'No regular collection system'],
};
const solutionProps = {
  title: 'Solution',
  pitch: 'Shredder ‚Üí pyrolysis (O‚ÇÇ-free, 400‚Äì550 ¬∞C) ‚Üí fractional condensation ‚Üí fuel. Syngas provides heat.',
  facts: ['O‚ÇÇ-free', '400‚Äì550 ¬∞C', '‚âà50% fuel', 'Syngas recirculated'],
  steps: [
    { key: 'waste', label: 'Plastic waste', icon: '/assets/icons/waste.svg', tip: 'Local mixed plastics' },
    { key: 'shred', label: 'Shredder', icon: '/assets/icons/shredder.svg', tip: 'Pre-shredding' },
    { key: 'pyro', label: 'Pyrolysis', icon: '/assets/icons/pyrolysis.svg', tip: 'Thermal, O‚ÇÇ-free‚Äîno flame' },
    { key: 'cond', label: 'Condensation', icon: '/assets/icons/condensation.svg', tip: 'Fractional condensation' },
    { key: 'fuel', label: 'Fuel', icon: '/assets/icons/fuel.svg', tip: 'Local fuel' },
  ],
  outputs: [
    { title: 'Fuel', value: '~50 %', note: 'usable locally' },
    { title: 'Syn-gas', value: 'self-energy', note: 'heats process' },
    { title: 'Biochar', value: 'optional', note: 'sequestration possible' },
  ],
};
---
<BaseLayout lang={lang} t={t} title="Solar fuel from plastic waste">
  <Hero
    title="Solar fuel from plastic waste ‚Äî where no one comes to collect."
    subtitle="Decentralized solar pyrolysis turns non-recyclable plastics into local fuel ‚Äî for boat-only coastal communities."
    ctaPrimary={{ href: '#contact', label: 'Become a partner' }}
    ctaSecondary={{ href: '#technology', label: 'How it works' }}
  />
  <ProblemSection {...problemProps} />
  <StorySection t={t.story || {}} />
  <SolutionSection {...solutionProps} />
  <BusinessSection t={t.business} />
  <ImpactSection t={t.impact} />
  <TeamSection t={t.team} />
  <PartnersSection t={t.partners} />
  {latest.length > 0 && (
    <section class="mx-auto max-w-6xl px-6 py-16">
      <h2 class="mb-8 text-3xl font-extrabold text-basola-brown">Latest News</h2>
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {latest.map(({ slug, data }) => (
          <NewsCard
            url={`/news/${slug}`}
            title={data.title}
            date={data.date}
            summary={data.summary}
            tags={data.tags}
            heroImage={data.heroImage}
          />
        ))}
      </div>
    </section>
  )}
  <ContactSection t={t.contact} />
</BaseLayout>
