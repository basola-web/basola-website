---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import StorySection from '../components/StorySection.astro';
import SolutionSection from '../components/SolutionSection.astro';
import BusinessSection from '../components/BusinessSection.astro';
import ProblemSection from '../components/ProblemSection.astro';
import ImpactSection from '../components/ImpactSection.astro';
import RouteMap from '../components/RouteMap.astro';
import TeamSection from '../components/TeamSection.astro';
import PartnersSection from '../components/PartnersSection.astro';
import ContactSection from '../components/ContactSection.astro';
import NewsCard from '../components/NewsCard.astro';
import { getCollection } from 'astro:content';
import de from '../i18n/de.json';
const lang = 'de';
const t = de;
const latest = (await getCollection('news', ({ data }) => data.lang === lang && !data.draft))
  .sort((a,b) => +new Date(b.data.date) - +new Date(a.data.date))
  .slice(0,3);
const problemProps = {
  heading: 'Das Problem â€“ wenn niemand abholt',
  subline:
    'In Orten wie Ladrilleros (nur per Boot erreichbar) gibt es keine MÃ¼llabfuhr: Plastik wird offen verbrannt oder abgelagert â€“ das belastet Luft, Meer & Gesundheit.',
  kpis: [
    { id: 'k1', value: 100, suffix: ' kg/Tag', label: 'Plastikabfall (lokal)' },
    { id: 'k2', value: 86, suffix: ' kg COâ‚‚/Tag', label: 'COâ‚‚ vermeidbar (offenes Verbrennen)' },
    { id: 'k3', value: 40, suffix: ' L/Tag', label: 'Diesel ersetzbar (lokal genutzt)' },
  ],
  progress: {
    targetPct: 85,
    title: 'Ungesammelter MÃ¼ll in KÃ¼stenorten',
    note: 'â†’ fÃ¼hrt hÃ¤ufig zu offenem Verbrennen oder Ablagerung.',
  },
  flow: [
    { icon: 'ğŸ—‘ï¸', title: 'Kein Abholsystem', text: 'Kein Zugang zu geregelter Entsorgung; Plastik sammelt sich.' },
    { icon: 'ğŸ”¥', title: 'Offenes Verbrennen', text: 'NotlÃ¶sung â€“ setzt Feinstaub, Black Carbon & COâ‚‚ frei.' },
    { icon: 'â˜ï¸', title: 'Gesundheit & Klima', text: 'Luftverschmutzung & Klimawirkung â€“ Ã¼ber dem Meer oft â€unsichtbarâ€œ.' },
  ],
  contextImage: { src: '/assets/Ladrilleros.png', alt: 'Ladrilleros KÃ¼stendorf' },
  contextChips: ['ğŸ“ â‰ˆ 60 min Boot von Buenaventura'],
  contextBullets: ['~100 kg Plastik tÃ¤glich', 'Diesel ~35% teurer als in der Stadt', 'Kein geregeltes Abholsystem'],
};
const solutionProps = {
  title: 'LÃ¶sung',
  pitch: 'Shredder â†’ pyrolyse (Oâ‚‚-frei, 400â€“550 Â°C) â†’ fraktionierte Kondensation â†’ Fuel. Syn-Gas heizt mit.',
  facts: ['Oâ‚‚-frei', '400â€“550 Â°C', 'â‰ˆ50 % Fuel', 'Syn-Gas rÃ¼ckgefÃ¼hrt'],
  steps: [
    { key: 'waste', label: 'Plastikabfall', icon: '/assets/icons/waste.svg', tip: 'Lokales, gemischtes Plastik' },
    { key: 'shred', label: 'Shredder', icon: '/assets/icons/shredder.svg', tip: 'Vorzerkleinerung' },
    { key: 'pyro', label: 'Pyrolyse', icon: '/assets/icons/pyrolysis.svg', tip: 'Thermisch, ohne Oâ‚‚ â€“ keine Flamme' },
    { key: 'cond', label: 'Kondensation', icon: '/assets/icons/condensation.svg', tip: 'Fraktionierte Kondensation' },
    { key: 'fuel', label: 'Fuel', icon: '/assets/icons/fuel.svg', tip: 'Lokaler Treibstoff' },
  ],
  outputs: [
    { title: 'Fuel', value: '~50 %', note: 'lokal nutzbar' },
    { title: 'Syn-Gas', value: 'Eigenenergie', note: 'heizt Prozess' },
    { title: 'Biochar', value: 'optional', note: 'Sequestrierung mÃ¶glich' },
  ],
};
---
<BaseLayout lang={lang} t={t} title="Solarkraftstoff aus PlastikmÃ¼ll">
  <Hero
    title="Solar-Kraftstoff aus PlastikmÃ¼ll â€“ dort, wo es niemand abholt."
    subtitle="Dezentrale Solar-Pyrolyse verwandelt nicht recycelbare Kunststoffe in lokalen Treibstoff â€“ fÃ¼r KÃ¼stenorte, die nur per Boot erreichbar sind."
    ctaPrimary={{ href: '#contact', label: 'Partner werden' }}
    ctaSecondary={{ href: '#technology', label: 'So funktioniertâ€™s' }}
  />
  <ProblemSection {...problemProps} />
  <StorySection t={t.story || {}} />
  <SolutionSection {...solutionProps} />
  <BusinessSection t={t.business} />
  <ImpactSection lang="de"
    kpis={[
      { id:'k1', value:80, suffix:' kg/Tag', label:'Sauber verarbeitet statt verbrannt/angeschwemmt' },
      { id:'k2', value:50, suffix:'+ t COâ‚‚/Jahr', label:'Vermieden (â‰ˆ2,3 kg COâ‚‚ pro kg Plastik)' },
      { id:'k3', value:2,  suffix:' Jobs', label:'Vollzeit, â‰¥2Ã— kolumb. Mindestlohn' },
      { id:'k4', value:100, suffix:'%',  label:'Saubere Luft â€“ keine offene Verbrennung' },
      { id:'k5', value:1,  suffix:' Community', label:'Strandreinigung wird vergÃ¼tete Ressource' },
      { id:'k6', value:1,  suffix:' Solar', label:'Ãœberschuss stÃ¤rkt Resilienz der Stromversorgung' },
    ]}
    split={{ fuelPct:50, syngasPct:40, restPct:10 }}
  />

  <RouteMap lang="de"
    origin={[-77.082224, 3.888441]}
    dest={[-77.351330, 3.928646]}
    waypoints={[[-77.12,3.87],[-77.20,3.86],[-77.28,3.88]]}
  />

  <TeamSection t={t.team} />
  <PartnersSection t={t.partners} />
  {latest.length > 0 && (
    <section class="mx-auto max-w-6xl px-6 py-16">
      <h2 class="mb-8 text-3xl font-extrabold text-basola-brown">Neueste Updates</h2>
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {latest.map(({ slug, data }) => (
          <NewsCard
            url={`/news/${slug}`}
            title={data.title}
            date={data.date}
            summary={data.summary}
            tags={data.tags}
            heroImage={data.heroImage}
          />
        ))}
      </div>
    </section>
  )}
  <ContactSection t={t.contact} />
</BaseLayout>
