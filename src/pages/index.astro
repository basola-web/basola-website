---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import ProcessFlow from '../components/ProcessFlow';
import ContainerSolution from '../components/ContainerSolution.astro';
import BusinessSection from '../components/BusinessSection.astro';
import ProblemSection from '../components/ProblemSection.astro';
import ImpactSection from '../components/ImpactSection.astro';
import TeamSection from '../components/TeamSection.astro';
import ContactSection from '../components/ContactSection.astro';
import NewsCarousel from '../components/NewsCarousel.astro';
import { getCollection } from 'astro:content';
import de from '../i18n/de.json';
const lang = 'de';
const t = de;
const latest = (await getCollection('news', ({ data }) => data.lang === lang && !data.draft))
  .sort((a,b) => +new Date(b.data.date) - +new Date(a.data.date))
  .slice(0,3);
const problemProps = {
  heading: 'Das Problem â€“ wenn niemand abholt',
  subline:
    'In Orten wie Ladrilleros (nur per Boot erreichbar) gibt es keine MÃ¼llabfuhr: Plastik wird offen verbrannt oder abgelagert â€“ das belastet Luft, Meer & Gesundheit.',
  kpis: [
    { id: 'k1', value: 100, suffix: ' kg/Tag', label: 'Plastikabfall (lokal)' },
    { id: 'k2', value: 86, suffix: ' kg COâ‚‚/Tag', label: 'COâ‚‚ vermeidbar (offenes Verbrennen)' },
    { id: 'k3', value: 40, suffix: ' L/Tag', label: 'Diesel ersetzbar (lokal genutzt)' },
  ],
  flow: [
    { icon: 'ğŸ—‘ï¸', title: 'Kein Abholsystem', text: 'Kein Zugang zu geregelter Entsorgung; Plastik sammelt sich.' },
    { icon: 'ğŸ”¥', title: 'Offenes Verbrennen', text: 'NotlÃ¶sung â€“ setzt Feinstaub, Black Carbon & COâ‚‚ frei.' },
    { icon: 'â˜ï¸', title: 'Gesundheit & Klima', text: 'Luftverschmutzung & Klimawirkung â€“ Ã¼ber dem Meer oft â€unsichtbarâ€œ.' },
  ],
};
---
<BaseLayout lang={lang} t={t} title="Solarkraftstoff aus PlastikmÃ¼ll">
  <Hero
    title="Solar-Kraftstoff aus PlastikmÃ¼ll â€“ dort, wo ihn niemand abholt."
    subtitle="Unsere kleinskalige Solar-Pyrolyseanlage verwandelt nicht recycelbare Kunststoffe in lokalen Treibstoff â€“ eine autarke LÃ¶sung fÃ¼r abgelegene Regionen ohne funktionierende Entsorgung und Energieversorgung."
    ctaPrimary={{ href: '#contact', label: 'Partner werden' }}
    ctaSecondary={{ href: '#loesung', label: 'So geht\'s!' }}
    badges={[
      { icon: 'ğŸ”‹', label: t.hero.badges[0] },
      { icon: 'ğŸŒ', label: t.hero.badges[1] },
      { icon: 'âš“', label: t.hero.badges[2] },
    ]}
  />
  <ProblemSection {...problemProps} />
  <ProcessFlow client:load />
  <ContainerSolution t={t.container} />
  <BusinessSection t={t.business} />
  <ImpactSection lang="de" />
  <TeamSection t={t.team} />
  {latest.length > 0 && (
    <section class="mx-auto max-w-6xl px-6 py-16">
      <h2 class="mb-8 text-3xl font-extrabold text-basola-brown">Neueste Updates</h2>
      <NewsCarousel
        items={latest.map(({ slug, data }) => ({
          url: `/news/${slug}`,
          title: data.title,
          date: data.date,
          summary: data.summary,
          heroImage: data.heroImage
        }))}
      />
    </section>
  )}
  <ContactSection t={t.contact} partners={t.partners} />
</BaseLayout>
