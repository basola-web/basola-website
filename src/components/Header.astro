---
import { getRelativeLocaleUrl } from 'astro:i18n';
const { lang, t } = Astro.props;
const otherLang = lang === 'en' ? 'de' : 'en';
let switchUrl = otherLang === 'de' ? '/de/' : '/';
try {
  switchUrl = getRelativeLocaleUrl(Astro.url, otherLang);
} catch {
  switchUrl = otherLang === 'de' ? '/de/' : '/';
}
const navItems = [
  { id: 'problem', label: t.problem },
  { id: 'solution', label: t.solution },
  { id: 'impact', label: t.impact },
  { id: 'team', label: t.team },
  { id: 'contact', label: t.contact },
];
---
<header class="sticky top-0 bg-white/80 backdrop-blur z-50">
  <div class="max-w-6xl mx-auto flex items-center justify-between p-4">
    <a href={lang === 'de' ? '/de/' : '/'} class="font-bold text-secondary text-xl">BASOLA</a>
    <button id="menu" class="md:hidden text-secondary">â˜°</button>
    <nav id="nav" class="hidden md:flex gap-4 items-center">
      {navItems.map(i => <a href={`#${i.id}`} class="text-secondary hover:text-primary">{i.label}</a>)}
      <a href={switchUrl} class="font-semibold">{otherLang.toUpperCase()}</a>
    </nav>
  </div>
</header>
<script is:client>
  const btn = document.getElementById('menu');
  const nav = document.getElementById('nav');
  btn?.addEventListener('click', ()=> nav.classList.toggle('hidden'));
</script>
