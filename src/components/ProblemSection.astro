---
interface Box {
  icon: string;
  title: string;
  bullets: string[];
}

const { lang = 'de' } = Astro.props;

const contentMap: Record<string, { eyebrow: string; heading: string; lead: string; boxes: Box[] }> = {
  de: {
    eyebrow: 'Kein Abtransport, teurer Kraftstoff',
    heading: 'Abgelegen, aber nicht chancenlos',
    lead:
      'Viele abgelegene Regionen – ob Inseln, Küstendörfer oder schwer zugängliche Siedlungen – haben eines gemeinsam: mangelnde Infrastruktur und fehlende Entsorgungssysteme.',
    boxes: [
      {
        icon: '/assets/icons/waste.svg',
        title: 'Abfall ohne Ausweg',
        bullets: [
          'Notverbrennung & offene Müllhalden',
          'Rauch, Giftstoffe, Umweltverschmutzung'
        ]
      },
      {
        icon: '/assets/icons/fuel.svg',
        title: 'Hohe Kraftstoffpreise',
        bullets: [
          'Isoliertes Setup → hohe Transportkosten',
          'Fehlende Elektrifizierung der Mobilität'
        ]
      }
    ]
  },
  en: {
    eyebrow: 'No waste removal, costly fuel',
    heading: 'Remote, but not without opportunity',
    lead:
      'Many remote regions — whether islands, coastal villages or hard-to-reach settlements — share one thing: poor infrastructure and a lack of waste disposal systems.',
    boxes: [
      {
        icon: '/assets/icons/waste.svg',
        title: 'Waste with no way out',
        bullets: [
          'Emergency burning & open dumps',
          'Smoke, toxins, environmental pollution'
        ]
      },
      {
        icon: '/assets/icons/fuel.svg',
        title: 'High fuel prices',
        bullets: [
          'Isolated setup → high transport costs',
          'No electrification of mobility'
        ]
      }
    ]
  },
  es: {
    eyebrow: 'Sin recogida de residuos, combustible caro',
    heading: 'Alejados, pero no sin oportunidades',
    lead:
      'Muchas regiones remotas — ya sean islas, pueblos costeros o asentamientos de difícil acceso — tienen algo en común: infraestructura deficiente y falta de sistemas de eliminación.',
    boxes: [
      {
        icon: '/assets/icons/waste.svg',
        title: 'Residuos sin salida',
        bullets: [
          'Quema de emergencia y vertederos abiertos',
          'Humo, toxinas, contaminación ambiental'
        ]
      },
      {
        icon: '/assets/icons/fuel.svg',
        title: 'Precios elevados del combustible',
        bullets: [
          'Configuración aislada → altos costos de transporte',
          'Falta de electrificación de la movilidad'
        ]
      }
    ]
  }
};

const content = contentMap[lang] ?? contentMap.en;
---
<section id="problem" class="mx-auto max-w-6xl px-6 pt-16 pb-6 text-secondary">
  <p class="mb-2 text-xs uppercase tracking-wide text-basola-yellow text-center">{content.eyebrow}</p>
  <h2 class="mb-6 text-3xl md:text-4xl font-extrabold text-basola-brown text-center">{content.heading}</h2>
  <p class="mb-12 text-lg text-secondary/80 text-center">{content.lead}</p>
  <div class="grid gap-6 md:grid-cols-2 justify-center">
    {content.boxes.map((b) => (
      <div class="p-4 bg-[#F7F6F3] rounded-xl shadow-sm flex flex-col max-w-xs mx-auto" data-anim>
        <img src={b.icon} alt="" class="mb-4 h-8 w-8" />
        <h3 class="mb-2 font-semibold text-basola-brown">{b.title}</h3>
        <ul class="list-disc pl-4 text-sm text-secondary/80 space-y-1">
          {b.bullets.map((item) => <li>{item}</li>)}
        </ul>
      </div>
    ))}
  </div>
</section>
<script>
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); observer.unobserve(e.target);} });
  }, { threshold: 0.2 });
  document.querySelectorAll('#problem [data-anim]').forEach(el=>{
    el.classList.add('opacity-0','translate-y-4','transition-all','duration-700');
    observer.observe(el);
  });
</script>
