---
interface Box {
  icon: string;
  title: string;
  bullets: string[];
}

const { lang = 'de' } = Astro.props;

const contentMap: Record<string, { eyebrow: string; heading: string; lead: string; boxes: Box[] }> = {
  de: {
    eyebrow: 'Kein Abtransport, teurer Kraftstoff',
    heading: 'Abgelegen, aber nicht chancenlos',
    lead:
      'Viele abgelegene Regionen ‚Äì ob Inseln, K√ºstend√∂rfer oder schwer zug√§ngliche Siedlungen ‚Äì haben eines gemeinsam: mangelnde Infrastruktur und fehlende Entsorgungssysteme.',
    boxes: [
      {
        icon: 'üóëÔ∏è',
        title: 'Abfall ohne Ausweg',
        bullets: [
          'Notverbrennung & offene M√ºllhalden',
          'Rauch, Giftstoffe, Umweltverschmutzung'
        ]
      },
      {
        icon: '‚õΩ',
        title: 'Hohe Kraftstoffpreise',
        bullets: [
          'Isoliertes Setup ‚Üí hohe Transportkosten',
          'Fehlende Elektrifizierung der Mobilit√§t'
        ]
      }
    ]
  },
  en: {
    eyebrow: 'No waste removal, costly fuel',
    heading: 'Remote, but not without opportunity',
    lead:
      'Many remote regions ‚Äî whether islands, coastal villages or hard-to-reach settlements ‚Äî share one thing: poor infrastructure and a lack of waste disposal systems.',
    boxes: [
      {
        icon: 'üóëÔ∏è',
        title: 'Waste with no way out',
        bullets: [
          'Emergency burning & open dumps',
          'Smoke, toxins, environmental pollution'
        ]
      },
      {
        icon: '‚õΩ',
        title: 'High fuel prices',
        bullets: [
          'Isolated setup ‚Üí high transport costs',
          'No electrification of mobility'
        ]
      }
    ]
  },
  es: {
    eyebrow: 'Sin recogida de residuos, combustible caro',
    heading: 'Alejados, pero no sin oportunidades',
    lead:
      'Muchas regiones remotas ‚Äî ya sean islas, pueblos costeros o asentamientos de dif√≠cil acceso ‚Äî tienen algo en com√∫n: infraestructura deficiente y falta de sistemas de eliminaci√≥n.',
    boxes: [
      {
        icon: 'üóëÔ∏è',
        title: 'Residuos sin salida',
        bullets: [
          'Quema de emergencia y vertederos abiertos',
          'Humo, toxinas, contaminaci√≥n ambiental'
        ]
      },
      {
        icon: '‚õΩ',
        title: 'Precios elevados del combustible',
        bullets: [
          'Configuraci√≥n aislada ‚Üí altos costos de transporte',
          'Falta de electrificaci√≥n de la movilidad'
        ]
      }
    ]
  }
};

const content = contentMap[lang] ?? contentMap.en;
---
<section id="problem" class="mx-auto max-w-6xl px-6 py-16 text-secondary">
  <p class="mb-2 text-xs uppercase tracking-wide text-basola-brown/60">{content.eyebrow}</p>
  <h2 class="mb-6 text-3xl font-extrabold text-basola-brown">{content.heading}</h2>
  <p class="mb-12 text-lg text-secondary/80">{content.lead}</p>
  <div class="grid gap-6 md:grid-cols-2 justify-center">
    {content.boxes.map((b) => (
      <div class="p-4 bg-[#F7F6F3] rounded-xl shadow-sm flex flex-col max-w-xs mx-auto" data-anim>
        <span class="text-3xl mb-4" aria-hidden="true">{b.icon}</span>
        <h3 class="mb-2 font-semibold text-basola-brown">{b.title}</h3>
        <ul class="list-disc pl-4 text-sm text-secondary/80 space-y-1">
          {b.bullets.map((item) => <li>{item}</li>)}
        </ul>
      </div>
    ))}
  </div>
</section>
<script>
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); observer.unobserve(e.target);} });
  }, { threshold: 0.2 });
  document.querySelectorAll('#problem [data-anim]').forEach(el=>{
    el.classList.add('opacity-0','translate-y-4','transition-all','duration-700');
    observer.observe(el);
  });
</script>
