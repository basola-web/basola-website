---
interface Box {
  icon: string;
  title: string;
  text: string;
}

const { lang = 'de' } = Astro.props;

const contentMap: Record<string, { heading: string; lead: string; boxes: Box[]; bridge: string }> = {
  de: {
    heading: 'Abgelegen, aber nicht chancenlos',
    lead:
      'Viele abgelegene Regionen ‚Äì ob Inseln, K√ºstend√∂rfer oder schwer zug√§ngliche Siedlungen ‚Äì haben eines gemeinsam: Sie stehen vor massiven Herausforderungen im Umgang mit Abfall und Energieversorgung.',
    boxes: [
      {
        icon: 'üóëÔ∏è',
        title: 'Abfall ohne Ausweg',
        text: 'Ohne funktionierende Entsorgungssysteme sammelt sich Plastik an und wird oft notd√ºrftig verbrannt ‚Äì mit sch√§dlichen Folgen f√ºr Umwelt und Gesundheit.'
      },
      {
        icon: 'üöß',
        title: 'Isolation statt Infrastruktur',
        text: 'Stra√üen, Recyclinganlagen oder Stromnetze gibt es kaum. Alles muss lokal gel√∂st werden, weil Transport und externe Entsorgung praktisch nicht m√∂glich sind.'
      },
      {
        icon: '‚õΩ',
        title: 'Hohe Kraftstoffpreise als Nebeneffekt',
        text: 'Kraftstoff gelangt nur √ºber lange und teure Wege in diese Regionen. Die Folge: deutlich h√∂here Preise ‚Äì ein zus√§tzlicher Anreiz, Abfall vor Ort in nutzbare Energie zu verwandeln.'
      }
    ],
    bridge:
      'BASOLA verbindet diese drei Herausforderungen in einer L√∂sung:\nUnsere solar-hybride Pyrolyseanlage macht aus Plastikm√ºll vor Ort den Treibstoff, den die Gemeinschaft dringend braucht ‚Äì autark, nachhaltig und bezahlbar.'
  },
  en: {
    heading: 'Remote, but not without opportunity',
    lead:
      'Many remote regions ‚Äî whether islands, coastal villages or hard-to-reach settlements ‚Äî share one thing: massive challenges in dealing with waste and securing energy supply.',
    boxes: [
      {
        icon: 'üóëÔ∏è',
        title: 'Waste with no way out',
        text: 'Without functioning disposal systems, plastic piles up and is often burned out of necessity‚Äîwith harmful effects on the environment and human health.'
      },
      {
        icon: 'üöß',
        title: 'Isolation over infrastructure',
        text: 'Roads, recycling facilities or power grids are scarce. Everything must be solved locally because transport and external disposal are practically impossible.'
      },
      {
        icon: '‚õΩ',
        title: 'High fuel prices as a side effect',
        text: 'Fuel reaches these regions only via long and costly routes. The result: much higher prices‚Äîanother incentive to turn local waste into usable energy.'
      }
    ],
    bridge:
      'BASOLA tackles all three challenges with one solution:\nOur solar-hybrid pyrolysis plant turns plastic waste on site into the fuel the community urgently needs‚Äîautonomous, sustainable and affordable.'
  },
  es: {
    heading: 'Alejados, pero no sin oportunidades',
    lead:
      'Muchas regiones remotas ‚Äì ya sean islas, pueblos costeros o asentamientos de dif√≠cil acceso ‚Äì tienen algo en com√∫n: afrontan enormes retos en la gesti√≥n de residuos y el suministro energ√©tico.',
    boxes: [
      {
        icon: 'üóëÔ∏è',
        title: 'Residuos sin salida',
        text: 'Sin sistemas de eliminaci√≥n funcionales, el pl√°stico se acumula y a menudo se quema de forma precaria, con consecuencias nocivas para el medio ambiente y la salud.'
      },
      {
        icon: 'üöß',
        title: 'Aislamiento en lugar de infraestructura',
        text: 'Casi no hay carreteras, plantas de reciclaje ni redes el√©ctricas. Todo debe resolverse localmente, porque el transporte y la eliminaci√≥n externa son pr√°cticamente imposibles.'
      },
      {
        icon: '‚õΩ',
        title: 'Precios elevados del combustible como efecto secundario',
        text: 'El combustible llega a estas regiones solo a trav√©s de rutas largas y costosas. El resultado: precios mucho m√°s altos, un incentivo adicional para transformar los residuos en energ√≠a √∫til in situ.'
      }
    ],
    bridge:
      'BASOLA re√∫ne estos tres retos en una sola soluci√≥n:\nNuestro sistema de pir√≥lisis solar-h√≠brida convierte los residuos pl√°sticos locales en el combustible que la comunidad necesita con urgencia ‚Äî aut√≥nomo, sostenible y asequible.'
  }
};

const content = contentMap[lang] ?? contentMap.en;
---
<section id="problem" class="mx-auto max-w-6xl px-6 py-16 text-secondary">
  <h2 class="mb-6 text-3xl font-extrabold text-basola-brown">{content.heading}</h2>
  <p class="mb-12 text-lg text-secondary/80">{content.lead}</p>
  <div class="grid gap-6 md:grid-cols-3">
    {content.boxes.map((b) => (
      <div class="p-6 bg-[#F7F6F3] rounded-xl shadow-sm flex flex-col" data-anim>
        <span class="text-3xl mb-4" aria-hidden="true">{b.icon}</span>
        <h3 class="mb-2 font-semibold text-basola-brown">{b.title}</h3>
        <p class="text-sm text-secondary/80">{b.text}</p>
      </div>
    ))}
  </div>
  <p class="mt-12 text-lg text-basola-brown whitespace-pre-line">{content.bridge}</p>
</section>
<script>
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); observer.unobserve(e.target);} });
  }, { threshold: 0.2 });
  document.querySelectorAll('#problem [data-anim]').forEach(el=>{
    el.classList.add('opacity-0','translate-y-4','transition-all','duration-700');
    observer.observe(el);
  });
</script>
